<div class="container my-3" *ngIf="!showTraineeList">
  <!-- Title -->
  <div class="d-flex justify-content-between align-items-center mb-2">
    <h2 class="h4 mb-0">Review - Trainee</h2>
  </div>

  <!-- Search and Action Buttons -->
  <div class="d-flex justify-content-between align-items-center flex-wrap gap-3 mb-3">
    <!-- Search -->
    <div class="d-flex align-items-center bg-white rounded px-2" style="padding: 0.25rem;">
      <i class="ph ph-magnifying-glass text-muted fs-5 me-2"></i>
      <form [formGroup]="KeywordForm" class="mb-0">
        <input
          type="text"
          placeholder="Search by Keyword"
          class="form-control form-control-sm border-0 shadow-none"
          formControlName="filterByKeyword" />
      </form>
    </div>

    <!-- Action Buttons -->
    <div class="d-flex flex-wrap gap-2">
      <button
        type="button"
        *ngIf="TNData.length < 10"
        class="btn btn-outline-secondary btn-sm btn-hover-purple">
        Employees: 0{{ TNData.length }}
      </button>
      <button
        type="button"
        *ngIf="TNData.length >= 10"
        class="btn btn-outline-secondary btn-sm btn-hover-purple">
        Employees: {{ TNData.length }}
      </button>
      <button
        type="button"
        (click)="downloadTable()"
        class="btn btn-outline-secondary btn-sm btn-hover-purple">
        
        <i class="ph ph-download-simple"></i>
      </button>
      <button
        type="button"
        class="btn btn-outline-secondary btn-sm btn-hover-purple"
        (click)="deleteAllMembers()">
        <i class="ph ph-trash"></i>
      </button>
      <button
        type="button"
        (click)="showFileUpload()"
        class="btn btn-sm d-flex align-items-center gap-1 text-white"
        style="background-color:#8347ad; border-color:#8347ad;">
        <i class="ph ph-paperclip"></i> Upload Files</button>
    </div>
  </div>

  <!-- Table -->
  <div class="table-responsive border" style="max-height: 300px; overflow-y: auto;">
    <table class="table table-hover mb-0 align-middle">
      <thead class="table-light sticky-top" style="font-size: 1vw;">
        <tr style="height: 60px;">
          <th scope="col">
            <input type="checkbox" id="parentCheckBox" style="border: 1px solid grey;" class="form-check-input" (change)="clickAllCheckBoxes()" />
          </th>
          <th scope="col" >Trainee ID <i class="ph ph-funnel-simple"></i></th>
          <th scope="col">Trainee Name <i class="ph ph-funnel-simple"></i></th>
          <th scope="col">Technology <i class="ph ph-funnel-simple"></i></th>
          <th scope="col">Action <i class="ph ph-funnel-simple"></i></th>
        </tr>
      </thead>
      <tbody style="font-size: 0.9vw;">
        <tr *ngIf="TNData.length === 0">
          <td colspan="5" class="text-center text-muted py-3">No Data Found</td>
        </tr>
        <tr *ngFor="let data of TNData; let i = index" style="height: 60px;">
          <td>
            <input type="checkbox" style="border: 1px solid grey;" class="form-check-input" [id]="'checkbox' + i" />
          </td>
          <td (click)="showTraineeDetails(i)" style="cursor: pointer; color:#9C6FE4 ">{{ data.TRAINEE_ID }}</td>
          <td>{{ data.TRAINEE_NAME }}</td>
          <td>{{ data.TECHNOLOGY }}</td>
          <td>
            <button
              type="button"
              class="btn btn-link text-dark p-0"
              (click)="showTraineeDetails(i)">
              <i class="ph ph-eye"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<div
  class="modal show fade d-block"
  tabindex="-1"
  *ngIf="showEditMember"
  style="background: rgba(0,0,0,0.5);">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Edit Employee</h5>
        <button
          type="button"
          class="btn-close"
          aria-label="Close"
          (click)="showEdit()">
        </button>
      </div>
      <form [formGroup]="editMemberForm" (ngSubmit)="EditedMemberDetails(editMemberForm.value)">
        <div class="modal-body">
          <div class="mb-3">
            <input type="text" class="form-control mb-2" placeholder="ACE ID" formControlName="ACE_ID" />
            <input type="text" class="form-control mb-2" placeholder="First Name" formControlName="First_Name" />
            <input type="text" class="form-control mb-2" placeholder="Mail ID" formControlName="Mail_ID" />
            <input type="text" class="form-control mb-2" placeholder="College Name" formControlName="College_Name" />
            <input type="text" class="form-control mb-2" placeholder="Practice" formControlName="Practice" />
            <input type="text" class="form-control" placeholder="DOJ" formControlName="DOJ" />
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-outline-secondary"
            (click)="clearForm()">
            <i class="ph ph-prohibit"></i> Cancel
          </button>
          <button
            type="submit"
            class="btn text-white"
            style="background-color:#9C6FE4;"
            [disabled]="!editMemberForm.valid">
            Submit
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<div
  class="modal show fade d-block" 
  tabindex="-1" *ngIf="showUploadFile" style="background:rgba(0,0,0,0.5);">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Upload File</h5>
        <button
          type="button"
          class="btn-close"
          aria-label="Close"
          (click)="showFileUpload()">
        </button>
      </div>
      <form [formGroup]="uploadForm" (ngSubmit)="uploadFile()">
        <div class="modal-body">
          <input
            type="file"
            class="form-control"
            formControlName="fileUpload"
            (change)="onFileChange($event)" />
        </div>
        <div class="modal-footer">
          <button
            type="button" 
            class="btn btn-outline-secondary"
            (click)="clearForm()">
            <i class="ph ph-prohibit"></i> Cancel
          </button>
          <button
            type="submit"
            class="btn text-white"
            style="background-color:#9C6FE4;"
            [disabled]="!uploadForm.valid">
            Submit
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
